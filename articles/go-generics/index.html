<!DOCTYPE html><html domain=thefortunedays.com lang=en><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><link href="/img/favicon/favicon-192x192.png?hash=735479e2c4" rel=icon type=image/png><meta content=#f9c412 name=theme-color><meta content="max-snippet:-1, max-image-preview: large, max-video-preview: -1" name=robots><title>Go Generics</title><meta content="Go Generics" property=og:title><meta content="Summary: Overall, Go generics (also called as type parameters) is good, but not so good. Generics on types &amp;amp; functions are supported,..." name=description><meta content="Summary: Overall, Go generics (also called as type parameters) is good, but not so good. Generics on types &amp;amp; functions are supported,..." property=og:description><meta content=summary_large_image name=twitter:card><meta content=@phamthethanh108 name=twitter:site><meta content=@phamthethanh108 name=twitter:creator><meta content=https://thefortunedays.com/img/remote/Z1o6V9l.jpg property=og:image><link href=https://thefortunedays.com/articles/go-generics/ rel=canonical><meta content=no-referrer-when-downgrade name=referrer><link href=/feed/feed.xml rel=alternate type=application/atom+xml title="[ The Fortune Days ]"><link href=/ rel=preconnect crossorigin=""><link href=/fonts/Inter-3.19.var.woff2 rel=preload type=font/woff2 as=font crossorigin=""><script async defer src="/js/min.js?hash=8db32dcb3a"></script><script async defer src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4025327352745846" crossorigin=anonymous></script><script csp-hash="">if (/Mac OS X/.test(navigator.userAgent))document.documentElement.classList.add('apple')</script><style>:root{--primary: #D5003C;--primary-dark:#6A001E;--main-width: calc(100vw - 3em)}main img{content-visibility:auto}article *{scroll-margin-top:50px}header nav{position:fixed;padding:.375em 1.5em;background:#111113;font-weight:200;text-align:right}@media (min-width:37.5em){:root{--main-width: calc(37.5em - 3em)}}dialog,share-widget{position:fixed;opacity:.9}share-widget{right:20px;bottom:20px}share-widget div{width:30px;height:30px;background-image:url(/img/share.svg);background-repeat:no-repeat;background-position:center}.apple share-widget div{background-image:url(/img/share-apple.svg)}body,share-widget button{margin:0}share-widget button:active{transform:scale(1.2)}dialog{background-color:#8dff80;z-index:1000}header aside{font-style:italic}#nav{z-index:2;position:relative}#reading-progress,header nav{z-index:1;width:100vw;left:0;top:0}#reading-progress{background-color:var(--primary);position:absolute;bottom:0;transform:translate(-100vw,0);will-change:transform;pointer-events:none}@font-face{font-display:optional;font-family:"Inter UI";font-weight:100 900;font-style:oblique 0deg 10deg;src:url(/fonts/Inter-3.19.var.woff2) format("woff2")}button,html{line-height:1.15}html{-webkit-text-size-adjust:100%;font-family:Inter UI,sans-serif;--font-family: Inter UI, sans-serif}h1{font-size:3em;line-height:1.25;margin:.67em 0 .5em;font-size:2.074rem;line-height:2.4rem;margin-bottom:1.36rem}a{background-color:transparent;color:#f9c412;text-decoration:none;color:var(--primary)}b,strong{font-weight:700}img{border-style:none;max-width:100%;height:auto;margin:0 auto}button{font-family:inherit;font-size:100%;overflow:visible;text-transform:none}[type=button],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}h3{font-size:2em;line-height:1.125;margin-bottom:.75em;font-size:1.4rem;line-height:1.6rem;margin-bottom:1.36rem}body,p,pre{font-size:1em}p,pre{margin-bottom:1.5em}body,p,pre{font-size:1rem;line-height:1.6}p,pre{margin-bottom:1.36rem}@media (min-width:600px){h1{font-size:4.3978rem;line-height:4.4rem}h3{font-size:2.1989rem;line-height:2.64rem}body,p,pre{font-size:1.1rem;line-height:1.6}h1,h3,p,pre{margin-bottom:1.496rem}}@media (min-width:1200px){h1{font-size:6.0756rem;line-height:6.72rem}h3{font-size:2.7rem;line-height:2.88rem}body,p,pre{font-size:1.2rem;line-height:1.6}h1,h3,p,pre{margin-bottom:1.632rem}}code,pre{overflow-x:auto}pre{font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace}pre:has(code:not([class])){background:#2d2d2d}pre code:not([class]){color:#ccc;padding:0;overflow-x:scroll}button,code{border-radius:.3em}code{color:#e2777a;padding:0 .3em;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:90%;background:#2d2d2d}h1,h3{font-family:var(--font-family)}a:hover{text-decoration:underline}button{max-width:100%;background:#f2f2f2;color:#191919;cursor:pointer;display:inline-block;padding:.75em 1.5em;text-align:center;margin:0 .75em 1.5em 0}button:hover{background:#d9d9d9;color:#000}button:not([disabled]){background:#f9c412;color:#181818;background:var(--primary)}button:not([disabled]):hover{background:#ba9005;color:#000;background:var(--primary-dark)}*{border:0;box-sizing:border-box}body,header nav a{font-family:var(--font-family);color:#d1d1d1}body{background:#111113}header{padding:4.5em 1.5em 3em;width:37.5em;margin:0 auto;text-align:center;max-width:100%;display:flex;align-items:center;flex-direction:column}header p{margin-top:0}header nav h1{float:left;font-size:inherit;line-height:inherit;margin:0;text-align:left}header nav a{font-weight:700;text-decoration:none;margin-left:1.5em}header nav a:first-of-type{margin-left:auto}header nav a:last-of-type{margin-right:1.5em}main{max-width:70rem;margin:0 auto}footer{background:#151515;color:#999;padding:3em;text-align:center}footer>*{margin:1.5em}footer nav a img{vertical-align:middle}footer nav,footer p{font-size:90%}article{max-width:100%;padding:1.5em;width:37.5em;margin:0 auto}code[class*=language-],pre[class*=language-]{color:#ccc;background:0 0;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]{padding:0}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.comment{color:#999}.token.punctuation{color:#ccc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.property{color:#f8c555}.token.builtin,.token.important,.token.keyword{color:#cc99cd}.token.string{color:#7ec699}.token.operator,.token.url{color:#67cdcc}.token.important{font-weight:700}.token.inserted{color:green}</style><header><nav><div id=nav><h1><a href=/ title=Homepage>[ The Fortune Days ]</a></h1><a href=/about/ >About</a></div><div id=reading-progress aria-hidden=true></div></nav><h1>Go Generics</h1><aside>5 min read.</aside><dialog id=message></dialog></header><main><article><p><picture><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/dogMW-1920w.avif 1920w, /img/remote/dogMW-1280w.avif 1280w, /img/remote/dogMW-640w.avif 640w, /img/remote/dogMW-320w.avif 320w" type=image/avif><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/dogMW-1920w.webp 1920w, /img/remote/dogMW-1280w.webp 1280w, /img/remote/dogMW-640w.webp 640w, /img/remote/dogMW-320w.webp 320w" type=image/webp><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/dogMW-1920w.png 1920w, /img/remote/dogMW-1280w.png 1280w, /img/remote/dogMW-640w.png 640w, /img/remote/dogMW-320w.png 320w" type=image/png><img alt="Go Generics/Type Parameters by programmingpercy" decoding=async height=1080 loading=lazy src=/img/remote/dogMW-1920w.png style="background-size:cover;background-image:url(&#34;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 1920 1080'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAGCAYAAAD68A/GAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAp0lEQVQImT2OWQ6CQBBE5/4X8QN1QIRBIShMXIBhUxEQSYwXKTON4eMl1UnXwnbvAsRLweszYtbdpDXMyQ8QtYTbpVhmIXgZIRhLmFUMXhzhNBe62cLhWIcOgk8Nt7mS276dwIsIZhnDqiVptlISVi7hj1P9fsghupRqaUav4LYJGN8YsG0D/vcO8Uzm5+3jTPU6Ud/M6CvwoUIwKHj/4RqdqpNEO5l/bCfG2v/njhoAAAAASUVORK5CYII='%3E%3C/image%3E%3C/svg%3E&#34;)" width=1920></picture><p><strong>Summary</strong>: Overall, Go generics (also called as type parameters) is good, but not so good. Generics on types & functions are supported, but methods are not - which causes a lot of limitations.<p>This post is just my very first feelings about the generics feature of Go after some simple experimentation, it's not a full picture of what generics in Go looks like, if you want to see the full picture, check this very long <a href=https://go.googlesource.com/proposal/+/refs/heads/master/design/43651-type-parameters.md>spec</a>.<h3 id=the-good-things>The Good Things <a href=#the-good-things class=direct-link>#</a></h3><p>Now you don't need to write function like max again and again for different data types:<pre class=language-r><code class=language-r>func max<span class="token punctuation">[</span>T constraints.Ordered<span class="token punctuation">]</span><span class="token punctuation">(</span>a T<span class="token punctuation">,</span> b T<span class="token punctuation">)</span> T <span class="token punctuation">{</span><br>	<span class="token keyword">if</span> a <span class="token operator">></span> b <span class="token punctuation">{</span><br>		return a<br>	<span class="token punctuation">}</span><br>	return b<br><span class="token punctuation">}</span><br><br>max<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">/</span><span class="token operator">/</span> <span class="token number">2</span><br>max<span class="token punctuation">(</span><span class="token number">4.5</span><span class="token punctuation">,</span> <span class="token number">3.9</span><span class="token punctuation">)</span> <span class="token operator">/</span><span class="token operator">/</span> <span class="token number">4.5</span></code></pre><p><a href=https://go.dev/play/p/tK0F9f80aef>Playground</a><p>And you can write a generics tree which can be only achieved in the past using interface{}<pre class=language-go><code class=language-go><span class="token keyword">type</span> tree<span class="token punctuation">[</span>T any<span class="token punctuation">]</span> <span class="token keyword">struct</span> <span class="token punctuation">{</span><br>	Left  <span class="token operator">*</span>tree<span class="token punctuation">[</span>T<span class="token punctuation">]</span><br>	Right <span class="token operator">*</span>tree<span class="token punctuation">[</span>T<span class="token punctuation">]</span><br>	Value T<br><span class="token punctuation">}</span><br><br>t <span class="token operator">:=</span> tree<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span><br>t1 <span class="token operator">:=</span> tree<span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span></code></pre><p><a href=https://go.dev/play/p/0M5bDzPIWMp>Playground</a><p>Typed parameters can be named or unnamed<pre class=language-go><code class=language-go><span class="token comment">// Index returns the index of e in s, or -1 if not found.</span><br><span class="token keyword">func</span> Index<span class="token punctuation">[</span>T <span class="token keyword">interface</span><span class="token punctuation">{</span> <span class="token function">Equal</span><span class="token punctuation">(</span>T<span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">(</span>s <span class="token punctuation">[</span><span class="token punctuation">]</span>T<span class="token punctuation">,</span> e T<span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span><br>	<span class="token keyword">for</span> i<span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> s <span class="token punctuation">{</span><br>		<span class="token keyword">if</span> e<span class="token punctuation">.</span><span class="token function">Equal</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>			<span class="token keyword">return</span> i<br>		<span class="token punctuation">}</span><br>	<span class="token punctuation">}</span><br>	<span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// Index returns the index of e in s, or -1 if not found.</span><br><span class="token keyword">func</span> Index1<span class="token punctuation">[</span>T Equaler<span class="token punctuation">[</span>T<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">(</span>s <span class="token punctuation">[</span><span class="token punctuation">]</span>T<span class="token punctuation">,</span> e T<span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span><br>	<span class="token keyword">for</span> i<span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> s <span class="token punctuation">{</span><br>		<span class="token keyword">if</span> e<span class="token punctuation">.</span><span class="token function">Equal</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>			<span class="token keyword">return</span> i<br>		<span class="token punctuation">}</span><br>	<span class="token punctuation">}</span><br>	<span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">type</span> Equaler<span class="token punctuation">[</span>T any<span class="token punctuation">]</span> <span class="token keyword">interface</span> <span class="token punctuation">{</span><br>	<span class="token function">Equal</span><span class="token punctuation">(</span>T<span class="token punctuation">)</span> <span class="token builtin">bool</span><br><span class="token punctuation">}</span></code></pre><p><a href=https://go.dev/play/p/NzoNjfZL6js>Playground</a><p>We can also union multiple types together<pre class=language-go><code class=language-go><span class="token keyword">type</span> numbers <span class="token keyword">interface</span> <span class="token punctuation">{</span><br>	<span class="token builtin">int</span> <span class="token operator">|</span> <span class="token builtin">int8</span> <span class="token operator">|</span> <span class="token builtin">int32</span> <span class="token operator">|</span> <span class="token builtin">int64</span> <span class="token operator">|</span> <span class="token builtin">float32</span> <span class="token operator">|</span> <span class="token builtin">float64</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">func</span> min<span class="token punctuation">[</span>T numbers<span class="token punctuation">]</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b T<span class="token punctuation">)</span> T <span class="token punctuation">{</span><br>	<span class="token keyword">if</span> a <span class="token operator">></span> b <span class="token punctuation">{</span><br>		<span class="token keyword">return</span> b<br>	<span class="token punctuation">}</span><br>	<span class="token keyword">return</span> a<br><span class="token punctuation">}</span><br><br><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// 2</span><br><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">2.4</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token comment">// 0.5</span></code></pre><p><a href=https://go.dev/play/p/lJmPmrvECin>Playground</a><p>~ operator can be used to "include" all underlying types<pre class=language-go><code class=language-go><span class="token keyword">type</span> degree <span class="token builtin">int</span><br><br><span class="token keyword">type</span> numbers <span class="token keyword">interface</span> <span class="token punctuation">{</span><br>	~<span class="token builtin">int</span> <span class="token operator">|</span> ~<span class="token builtin">int8</span> <span class="token operator">|</span> ~<span class="token builtin">int32</span> <span class="token operator">|</span> ~<span class="token builtin">int64</span> <span class="token operator">|</span> ~<span class="token builtin">float32</span> <span class="token operator">|</span> ~<span class="token builtin">float64</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">func</span> min<span class="token punctuation">[</span>T numbers<span class="token punctuation">]</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b T<span class="token punctuation">)</span> T <span class="token punctuation">{</span><br>	<span class="token keyword">if</span> a <span class="token operator">></span> b <span class="token punctuation">{</span><br>		<span class="token keyword">return</span> b<br>	<span class="token punctuation">}</span><br>	<span class="token keyword">return</span> a<br><span class="token punctuation">}</span><br><br><span class="token function">min</span><span class="token punctuation">(</span><span class="token function">degree</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">degree</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 2</span><br><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">2.4</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token comment">// 0.5</span></code></pre><p><a href=https://go.dev/play/p/hFn6dXMqNUg>Playground</a><p>comparable interface can be used for writing comparable functions:<pre class=language-go><code class=language-go><span class="token keyword">func</span> equal<span class="token punctuation">[</span>T comparable<span class="token punctuation">]</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b T<span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span><br>	<span class="token keyword">return</span> a <span class="token operator">==</span> b<br><span class="token punctuation">}</span><br><br><span class="token function">equal</span><span class="token punctuation">(</span><span class="token function">degree</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">degree</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// false</span><br><span class="token function">equal</span><span class="token punctuation">(</span><span class="token function">degree</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">degree</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true</span><br><span class="token function">equal</span><span class="token punctuation">(</span><span class="token number">2.4</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token comment">// false</span><br><span class="token function">equal</span><span class="token punctuation">(</span><span class="token number">2.3</span><span class="token punctuation">,</span> <span class="token number">2.3</span><span class="token punctuation">)</span> <span class="token comment">// true</span></code></pre><p><a href=https://go.dev/play/p/CvT6p2CVbgp>Playground</a><h3 id=the-limitations>The Limitations <a href=#the-limitations class=direct-link>#</a></h3><p><strong>Methods cannot be generics</strong><p>What does it mean when methods cannot be generics? It means you will not be able to write a map or reduce API like Java. The main reason for not supporting this feature is because of typed parameters only known by the compiler, the runtime has no ideas about type parameters and this introduces some complexity for the instantiation during run time .<p>You can see the full explanation from the Go team <a href=https://go.googlesource.com/proposal/+/refs/heads/master/design/43651-type-parameters.md#No-parameterized-methods>here</a>, it's pretty much well explained. But I personally don't really agree with them when they say "one of the main roles of methods is to permit types to implement interfaces" and used this to argue about not including generics on methods. To me, methods are more important than just to "implement" an interface.<p>So any alternative way for writing map/reduce like API? Yes, use functions instead.<pre class=language-go><code class=language-go><span class="token comment">// Map turns a []T1 to a []T2 using a mapping function.</span><br><span class="token comment">// This function has two type parameters, T1 and T2.</span><br><span class="token comment">// This works with slices of any type.</span><br><span class="token keyword">func</span> Map<span class="token punctuation">[</span>T1<span class="token punctuation">,</span> T2 any<span class="token punctuation">]</span><span class="token punctuation">(</span>s <span class="token punctuation">[</span><span class="token punctuation">]</span>T1<span class="token punctuation">,</span> f <span class="token keyword">func</span><span class="token punctuation">(</span>T1<span class="token punctuation">)</span> T2<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>T2 <span class="token punctuation">{</span><br>	r <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span>T2<span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span><br>	<span class="token keyword">for</span> i<span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> s <span class="token punctuation">{</span><br>		r<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><br>	<span class="token punctuation">}</span><br>	<span class="token keyword">return</span> r<br><span class="token punctuation">}</span><br><br><span class="token comment">// Reduce reduces a []T1 to a single value using a reduction function.</span><br><span class="token keyword">func</span> Reduce<span class="token punctuation">[</span>T1<span class="token punctuation">,</span> T2 any<span class="token punctuation">]</span><span class="token punctuation">(</span>s <span class="token punctuation">[</span><span class="token punctuation">]</span>T1<span class="token punctuation">,</span> initializer T2<span class="token punctuation">,</span> f <span class="token keyword">func</span><span class="token punctuation">(</span>T2<span class="token punctuation">,</span> T1<span class="token punctuation">)</span> T2<span class="token punctuation">)</span> T2 <span class="token punctuation">{</span><br>	r <span class="token operator">:=</span> initializer<br>	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> s <span class="token punctuation">{</span><br>		r <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> v<span class="token punctuation">)</span><br>	<span class="token punctuation">}</span><br>	<span class="token keyword">return</span> r<br><span class="token punctuation">}</span></code></pre><p><a href=https://go.googlesource.com/proposal/+/HEAD/design/43651-type-parameters.md#map_reduce_filter>More Detail</a><p><strong>Mixed types cannot be inferred as any</strong><p>Typed parameters mean all parameters must be the same type. And the inference rule of Go is that it will check the type of the first parameter, others must follow the same. What does it mean? It means if you don't declare the first parameter as <code>any</code>explicitly, it will never be inferred as <code>any</code>.<pre class=language-go><code class=language-go><span class="token keyword">func</span> Print<span class="token punctuation">[</span>T any<span class="token punctuation">]</span><span class="token punctuation">(</span>t <span class="token operator">...</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><br><br><span class="token comment">//</span><br><span class="token keyword">var</span> a any <span class="token operator">=</span> <span class="token number">1</span><br><span class="token function">Print</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token string">"2"</span><span class="token punctuation">)</span> <span class="token comment">// VALID as all parameters will be inferred as "any".</span><br>Print<span class="token punctuation">[</span>any<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"2"</span><span class="token punctuation">)</span> <span class="token comment">// VALID as we provided the type parameter as "any".</span><br><span class="token function">Print</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"2"</span><span class="token punctuation">)</span> <span class="token comment">// INVALID since its expect all parameters as int and "2" is not an int.</span></code></pre><p><a href=https://go.dev/play/p/X-uugX8IHSJ>Playground</a><p>Although we can provide the type parameter when calling the method, but it is kind of inconvenient.<p><strong>[T ~[]any] and [S ~[]T, T any] Are Different</strong><p>This is not really a limitation, it is just a mistake people who first started with generics often face. The difference between the two declarations is the first one declares <code>any</code>as a specific type, the latter declares it as a parameter type.<p>[T ~[]any] only accepts []any, but [S ~[]T, T any] will accept any kind of slices, such as: []int, []string, []any,...<p><strong>Interfaces with methods can be used as a typed parameters, but cannot be "union"</strong><p>Yes, it is. But what's the point of having union interfaces? I don't really know the usage of this case.</p><share-widget><button aria-label=Share href=https://thefortunedays.com/articles/go-generics/ on-click=share><div></div></button></share-widget><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","headline":"Go Generics","image":["https://thefortunedays.com/img/remote/dogMW-1920w.png"],"author":"Thanh Pham","genre":"Blog","publisher":{"@type":"Organization","name":"Thanh Pham","logo":{"@type":"ImageObject","url":"/img/favicon/favicon-192x192.png?hash=735479e2c4"}},"url":"https://thefortunedays.com/articles/go-generics/","mainEntityOfPage":"https://thefortunedays.com/articles/go-generics/","datePublished":"2022-06-02","dateModified":"2024-03-09","description":"Summary: Overall, Go generics (also called as type parameters) is good, but not so good. Generics on types &amp;amp; functions are supported,..."}</script></article></main><footer><a href=/about/ >Thanh Pham</a></footer>