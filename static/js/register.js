const register={gender:"1",user:{first_name:"",last_name:"",gender:1,email:"",password:"",password_confirm:""},errors:{},dirty:!1,processing:!1,validateFirstName(){return!this.dirty||(this.errors.first_name="",""!==this.user.first_name.trim()||(this.errors.first_name="First Name is required.",!1))},validateLastName(){return!this.dirty||(this.errors.last_name="",""!==this.user.last_name.trim()||(this.errors.last_name="Last Name is required.",!1))},validatePassword(){return!this.dirty||(this.errors.password="",""===this.user.password?(this.errors.password="Password is required.",!1):!(this.user.password.length<3)||(this.errors.password="Password is too short.",!1))},validatePasswordConfirm(){return!this.dirty||this.user.password===this.user.password_confirm},validateEmail(){return!this.dirty||(this.errors.email="",""===this.user.email?(this.errors.email="Email is required",!1):!!isValidEmail(this.user.email)||(this.errors.email="Email is invalid",!1))},validate(){return this.dirty=!0,this.validateFirstName()&&this.validateLastName()&&this.validateEmail()&&this.validatePassword()&&this.validatePasswordConfirm()},register(){this.errors.server="",this.processing=!0,this.validate()?(this.user.gender=parseInt(this.gender),fetch("/api/v1/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({first_name:this.user.first_name,last_name:this.user.last_name,gender:this.user.gender,email:this.user.email,password:this.user.password})}).then(s=>s.json()).then(s=>{409!==s.code?void 0===s.error||""===s.error?this.login():this.errors.server="Server Error: "+s.error:this.errors.email="Email is being used."}).catch(s=>{this.errors.server="Server Error: "+s}).finally(()=>{this.processing=!1})):this.processing=!1},login(){this.processing=!0,fetch("/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:this.user.email,password:this.user.password})}).then(s=>s.json()).then(s=>{void 0===s.error||""===s.error?goTo("/"):goTo("/users/login")}).catch(s=>{goTo("/users/login")}).finally(()=>{this.processing=!1})}};