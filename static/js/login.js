const login={user:{email:"",password:""},dirty:!1,errors:{},processing:!1,validatePassword(){return!this.dirty||(this.errors.password="",""!==this.user.password||(this.errors.password="Password is required.",!1))},validateEmail(){return!this.dirty||(this.errors.email="",""===this.user.email?(this.errors.email="Email is required",!1):!!isValidEmail(this.user.email)||(this.errors.email="Email is invalid",!1))},validate(){return this.dirty=!0,this.validateEmail()&&this.validatePassword()},auth(){this.processing=!0,this.errors.server="",this.validate()?fetch("/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.user)}).then(r=>r.json()).then(r=>{console.log("code",r),200!=r.status&&r.status<500?this.errors.server="Invalid email or password!":void 0===r.error||""===r.error?goTo(getQueryParam("redirect","/")):this.errors.server="Server Error: "+r.error}).catch(r=>{this.errors.server="Server Error: "+r}).finally(()=>{this.processing=!1}):this.processing=!1}};